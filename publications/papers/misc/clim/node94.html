<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Drawing Option Binding Forms</TITLE>
<META NAME="description" CONTENT="Drawing Option Binding Forms">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node97.html">
<LINK REL="previous" HREF="node93.html">
<LINK REL="up" HREF="node92.html">
<LINK REL="next" HREF="node95.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html2057"
 HREF="node95.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html2053"
 HREF="node92.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html2047"
 HREF="node93.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html2055"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2058"
 HREF="node95.html">Transformation ``Convenience'' Forms</A>
<B> Up:</B> <A NAME="tex2html2054"
 HREF="node92.html">Drawing Options</A>
<B> Previous:</B> <A NAME="tex2html2048"
 HREF="node93.html">Medium Components</A>
 &nbsp <B>  <A NAME="tex2html2056"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION05120000000000000000">
Drawing Option Binding Forms</A>
</H1>

<P>
with-drawing-options (medium <TT> &amp;rest </TT>drawing-options) <TT> &amp;body </TT>body

<P>
Binds the state of the <I> medium</I> designated by <I> medium</I> to correspond to
the supplied drawing options, and executes the body with the new drawing options
specified by <I> drawing-options</I> in effect.  Each option causes binding of the
corresponding component of the medium for the dynamic extent of the body.  The
drawing functions effectively do a with-drawing-options when drawing option
arguments are supplied to them.

<P>
 
<I> medium</I> can be a medium, a sheet that supports the sheet output protocol,
or a stream that outputs to such a sheet.  The <I> medium</I> argument is not
evaluated, and must be a symbol that is bound to a sheet or medium.  If
<I> medium</I> is t, *standard-output* is used.  <I> body</I> may have
zero or more declarations as its first forms.

<P>
with-drawing-options must be implemented by expanding into a call to
invoke-with-drawing-options, supplying a function that executes <I> body</I>
as the <I> function</I> argument to invoke-with-drawing-options.  The exact
behavior of this macro is described under invoke-with-drawing-options.

<P>
invoke-with-drawing-options medium function <TT> &amp;rest </TT>drawing-options

<P>
Binds the state of the <I> medium</I> <I> medium</I> to correspond to the supplied
drawing options, and then calls the function <I> function</I> with the new drawing
options in effect.  <I> function</I> is a function of one argument, the medium; it
has dynamic extent.  <I> drawing-options</I> is a list of alternating
keyword-value pairs, and must have even length.  Each option in
<I> drawing-options</I> causes binding of the corresponding component of the
medium for the dynamic extent of the body.

<P>
 
<I> medium</I> can be a medium, a sheet that supports the sheet output protocol,
or a stream that outputs to such a sheet.  All classes that obey the medium
protocol must implement a method for invoke-with-drawing-options.

<P>
The drawing options can be any of the following, plus any of the suboptions for
line styles and text styles.  The default value specified for a drawing option
is the value to which the corresponding component of a medium is normally
initialized.

<P>
 
:ink

<P>
A design that will be used as the ink for drawing operations.  The drawing
functions draw with the color and pattern that this specifies.  The default
value is +foreground-ink+.  See Chapter&nbsp;<A HREF="node119.html#color">13</A> for a complete
description of inks.

<P>
The :ink <I> ink</I> drawing option temporarily changes the value of
(medium-ink <I> medium</I>) to <I> ink</I>, replacing the previous ink; the
new and old inks are not combined in any way.

<P>
 
:transformation

<P>
This transforms the coordinates used as arguments to drawing functions to the
coordinate system of the drawing plane.  The default value is
+identity-transformation+.  See Chapter&nbsp;<A HREF="node35.html#transforms">5</A> for a complete
description of transformations.

<P>
The :transformation <I> xform</I> drawing option temporarily changes the
value of(medium-transformation <I> medium</I>) to
(compose-transformations (medium-transformation <I> medium</I>) <I> xform</I>).

<P>
 
:clipping-region

<P>
The drawing functions do not affect the drawing plane outside this region.  The
clipping region must be an area.  Furthermore, some implementations might
signal an error if the clipping region is not a rectangle or a region set
composed entirely of rectangles.  Rendering is clipped both by this clipping
region and by other clipping regions associated with the mapping from the target
drawing plane to the viewport that displays a portion of the drawing plane.  The
default is +everywhere+, or in other words, no clipping occurs in the
drawing plane, only in the viewport.

<P>
The :clipping-region <I> region</I> drawing option temporarily changes the
value of (medium-clipping-region <I> medium</I>) to (region-intersection
(transform-region (medium-transformation <I> medium</I>) <I> region</I>)
(medium-clipping-region <I> medium</I>)).  If both a clipping region and a
transformation are supplied in the same set of drawing options, the clipping
region argument is transformed by the newly composed transformation before
calling region-intersection.

<P>
DCPL A better explanation is needed.  It does the right thing, but
it's hard to tell that from this description.

<P>
 
:line-style

<P>
The line and arc drawing functions render according to this line style.  The
line style suboptions and default are defined in Section&nbsp;<A HREF="node97.html#line-styles">10.3</A>.

<P>
The :line-style <I> ls</I> drawing option temporarily changes the value of
(medium-line-style <I> medium</I>) to <I> ls</I>, replacing the previous line
style; the new and old line styles are not combined in any way.

<P>
If line style suboptions are supplied, they temporarily change the value of
(medium-line-style <I> medium</I>) to a line style constructed from the
specified suboptions.  Components not specified by suboptions are defaulted from
the :line-style drawing option, if it is supplied, or else from the
previous value of (medium-line-style <I> medium</I>).  That is, if both the
:line-style option and line style suboptions are supplied, the suboptions
take precedence over the components of the :line-style option.

<P>
 
:text-style

<P>
The text drawing functions, including ordinary stream output, render text as
directed by this text style merged against the default text style.  The default
value has all null components.  See Chapter&nbsp;<A HREF="node100.html#text-styles">11</A> for a complete
description of text styles, including the text style suboptions.

<P>
The :text-style <I> ts</I> drawing option temporarily changes the value of
(medium-text-style <I> medium</I>) to (merge-text-styles <I> ts</I>
(medium-text-style <I> medium</I>)).

<P>
If text style suboptions are supplied, they temporarily change the value of
(medium-text-style <I> medium</I>) to a text style constructed from the
specified suboptions, merged with the :text-style drawing option if it is
specified, and then merged with the previous value of (medium-text-style
<I> medium</I>).  That is, if both the :text-style option and text style
suboptions are supplied, the suboptions take precedence over the components of
the :text-style option.

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html2059"
 HREF="node95.html">Transformation ``Convenience'' Forms</A>
<LI><A NAME="tex2html2060"
 HREF="node96.html">Establishing Local Coordinate Systems</A>
</UL>
<!--End of Table of Child-Links-->
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2057"
 HREF="node95.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html2053"
 HREF="node92.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html2047"
 HREF="node93.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html2055"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2058"
 HREF="node95.html">Transformation ``Convenience'' Forms</A>
<B> Up:</B> <A NAME="tex2html2054"
 HREF="node92.html">Drawing Options</A>
<B> Previous:</B> <A NAME="tex2html2048"
 HREF="node93.html">Medium Components</A>
 &nbsp <B>  <A NAME="tex2html2056"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
