<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Defining and Creating Application Frames</TITLE>
<META NAME="description" CONTENT="Defining and Creating Application Frames">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node253.html">
<LINK REL="previous" HREF="node251.html">
<LINK REL="up" HREF="node250.html">
<LINK REL="next" HREF="node253.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html4215"
 HREF="node253.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html4211"
 HREF="node250.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html4205"
 HREF="node251.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html4213"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html4216"
 HREF="node253.html">The Application Frame Protocol</A>
<B> Up:</B> <A NAME="tex2html4212"
 HREF="node250.html">Application Frames</A>
<B> Previous:</B> <A NAME="tex2html4206"
 HREF="node251.html">Overview</A>
 &nbsp <B>  <A NAME="tex2html4214"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION08220000000000000000">
Defining and Creating Application Frames</A>
</H1>

<P>
application-frame

<P>
The protocol class that corresponds to an application frame.
an application frame application-frame

<P>
All application frame classes are mutable.

<P>
application-frame-p object

<P>
Returns <I> true</I> if <I> object</I> is an <I> application frame</I>, otherwise
returns <I> false</I>.

<P>
 
:name
:pretty-name
:panes
:command-table
:disabled-commands

<P>
All subclasses of application-frame must handle these initargs, which are
used to specify, respectively, the name, pretty name, sequence of panes, command
table, and initial set of disabled commands for the frame.

<P>
standard-application-frame

<P>
The standard class that implements application frames.  By default, most
application frame classes will inherit from this class, unless a non-nil
value for <I> superclasses</I> is supplied to define-application-frame.

<P>
define-application-frame name superclasses slots <TT> &amp;rest </TT>options

<P>
Defines a frame and CLOS class named by the symbol <I> name</I> that inherits from
<I> superclasses</I> and has state variables specified by <I> slots</I>.
<I> superclasses</I> is a list of superclasses that the new class will inherit
from (as in defclass).  When <I> superclasses</I> is nil, it behaves as
though a superclass of standard-application-frame was supplied.
<I> slots</I> is a list of additional slot specifiers, as in defclass.  Each
instance of the frame will have slots as specified by these slot specifiers.
These slots will typically hold any per-instance frame state.

<P>
 
<I> options</I> is a list of defclass-style options, and can include the
usual defclass options defclass, plus any of the following:

<P>

<UL>
<LI>:pane <I> form</I>, where <I> form</I> specifies the single pane in the
application.  There is no default for this option.  This is the simplest way to
define a pane hierarchy.  The :pane and :panes options are mutually
exclusive.  See below for a complete description of the :pane option.

<P>
 </LI>
<LI>:panes <I> form</I>, where <I> form</I> specifies the panes of the
application.  There is no default for this option.  The :pane and
:panes options are mutually exclusive.  See below for a complete
description of the :panes option.

<P>
 </LI>
<LI>:layout <I> form</I>, where <I> form</I> specifies the layout.  The
default layout is to lay the panes out in horizontal strips.  See below for a
complete description of the :layout option.

<P>
 </LI>
<LI>:command-table <I> name-and-options</I>, where
<I> name-and-options</I> is a list consisting of the name of the application
frame's command table followed by some keyword-value pairs.  The keywords can be
<I> inherit-from</I> or <I> menu</I> (which are as in define-command-table).
The default is to create a command table with the same name as the application
frame.

<P>
 </LI>
<LI>:command-definer <I> value</I>, where <I> value</I> either nil,
t, or another symbol.  When it is nil, no command-defining macro is
defined.  When it is t, a command-defining macro is defined, whose name is
of the form define-<I> name</I>-command.  When it is another symbol, the
symbol names the command-defining macro.  The default is t.

<P>
 </LI>
<LI>:disabled-commands <I> commands</I>, where <I> commands</I> is a list
of command names that are initially disabled in the application frame.

<P>
 </LI>
<LI>:command-menu <I> command-table</I> specifies a set of commands that
the user can directly invoke from the frame in some frame manager specific way,
such as a menu bar on a Macintosh.  In other words, it specifies the top-level
commands of the application.  <I> command-table</I> is the command table whose
menu will be used in the ``menu bar''.  If defaults to the command table for the
application.

<P>
 </LI>
<LI>:top-level <I> form</I>, where <I> form</I> is a list whose first
element is the name of a function to be called to execute the top-level loop.
The function must take at least one argument, the frame.  The rest of the list
consists of additional arguments to be passed to the function.  The default
function is default-frame-top-level.

<P>
 </LI>
<LI>:resize-frame <I> resize-p</I>, where if <I> resize-p</I> is <I> true</I>,
this indicates that the frame is willing to be resized when panes in its current
hierarchy change their space requirements or when a new hierarchy is selected by
changing the frame's current layout.</LI>
</UL>

<P>
SWM Explain what gets evaluated when.

<P>
SWM What does :layout look like?  TeX-like?  Genera constraint
frames? 

<P>
The value of the :panes option is a list of pane descriptions.  Each pane
descriptions is a cons consisting of a pane name (which is a symbol), a pane
type, and a list of keyword-value pairs.

<P>
The pane options usable by all panes types are:

<P>

<UL>
<LI>:default-text-style <I> text-style</I>.

<P>
 </LI>
<LI>:scroll-bars <I> scroll-bar-spec</I>.

<P>
 </LI>
<LI>:default-size <I> size-spec</I>.

<P>
 </LI>
<LI>:display-function <I> display-spec</I>, where <I> display-spec</I> is
a list whose first element is the name of a function to be applied to the
application frame, the pane, and the rest of <I> display-spec</I>.  Two predefined
display functions are display-command-menu (in which case a typical
display-spec would be `(display-command-menu ,<I> command-table</I>)), and
incremental-redisplay-display-function (in which case a typical
display-spec would be '(incremental-redisplay-display-function
<I> display-function</I>)).

<P>
 </LI>
<LI>:display-time <I> time</I> controls when the pane's displayer function
is called.  When <I> time</I> is nil, the pane's displayer is not called.
When <I> time</I> is t, the displayer is called the ``next time'', and then
the display time is set to nil.  When <I> time</I> is :command-loop, the
displayer is run each time around the application frame's command loop.</LI>
</UL>

<P>
When a pane uses incremental redisplay (via
incremental-redisplay-display-function), CLIM supplies the outermost call
to updating-output, saves the incremental redisplay record, and calls
redisplay.  The function that does the output performs only the nested
calls to updating-output.  If an application pane uses incremental
redisplay without using the incremental-redisplay-display-function, it must
perform the outermost call to updating-output, save the incremental
redisplay record, and call redisplay itself.

<P>
SWM :panes is wrong, get the real scoop from Dennis or Bill.
Their description is that the :panes option is used to define multiple
named top-level panes.  Its format is a list of two element lists.  The first
element of each sublist is a symbol naming the layout.  The second element is a
form that evaluates to a pane.  Using setf on frame-current-layout can
be used to switch between the defined layouts.  The generate-pane method
supplied will also take into account the current frame layout though it will use
the first layout as a default.

<P>
SWM ILA seems to have flushed pane types altogether and hand all of
that stuff to the :display-function and :display-time?  Not a bad
idea.  On the other hand, it's nice to be able to specify a name for a canned
set of pane options instead of specifying the options individually.

<P>
SWM What are the defaults for the pane options?

<P>
with-application-frame (frame) <TT> &amp;body </TT>body

<P>
This macro provides lexical access to the ``current'' frame for use with the
:pane, :panes, and :layout options.  <I> frame</I> is bound to the
current frame within the context of one of those options.  <I> body</I> may have
zero or more declarations as its first forms.

<P>
make-application-frame frame-type <TT> &amp;rest </TT>options
                                 <TT> &amp;key </TT>frame-manager enable shrink state 
                                      left top right bottom width height
                                 <TT> &amp;allow-other-keys </TT> 

<P>
Makes an instance of the application frame of type <I> frame-type</I>.
<I> options</I> are passed as additional arguments to make-instance, after
the frame manager and sizing options have been removed.

<P>
 
<I> left</I>, <I> top</I>, <I> right</I>, <I> bottom</I>, <I> width</I>, and <I> height</I>
can be used to specify the size of the frame.

<P>
If <I> frame-manager</I> is provided, then the frame is adopted by the specified
frame manager.  If the frame is adopted and any of <I> enable</I>, <I> shrink</I>,
or <I> state</I> are provided, the frame is pushed into the given state.

<P>
SWM Are there standard options, such as what display to put the window
on?

<P>
SWM What is the documented interface for selecting/exposing the frame?
Should there be a way to find-or-create a frame for a given application?  Or is
that too much into the window-manager field?

<P>
 
*application-frame*

<P>
The current application frame.  The global value is CLIM's default application,
which serves only as a repository for whatever internal state needed by CLIM to
operate properly.  This variable is typically used in the bodies of command to
gain access to the state variables of the application frame, usually in
conjunction with with-slots or slot-value.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html4215"
 HREF="node253.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html4211"
 HREF="node250.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html4205"
 HREF="node251.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html4213"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html4216"
 HREF="node253.html">The Application Frame Protocol</A>
<B> Up:</B> <A NAME="tex2html4212"
 HREF="node250.html">Application Frames</A>
<B> Previous:</B> <A NAME="tex2html4206"
 HREF="node251.html">Overview</A>
 &nbsp <B>  <A NAME="tex2html4214"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
