<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Text Output Recording</TITLE>
<META NAME="description" CONTENT="Text Output Recording">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node172.html">
<LINK REL="previous" HREF="node170.html">
<LINK REL="up" HREF="node168.html">
<LINK REL="next" HREF="node172.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html3090"
 HREF="node172.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html3086"
 HREF="node168.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html3080"
 HREF="node170.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html3088"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3091"
 HREF="node172.html">Output Recording Utilities</A>
<B> Up:</B> <A NAME="tex2html3087"
 HREF="node168.html">Output Recording Streams</A>
<B> Previous:</B> <A NAME="tex2html3081"
 HREF="node170.html">Graphics Output Recording</A>
 &nbsp <B>  <A NAME="tex2html3089"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION06233000000000000000">
Text Output Recording</A>
</H2>

<P>
SWM This is the place where write-string and friends get captured
in order to create output record.  The generic functions include things like
stream-write-string, which are specialized by output recording streams to
do the output recording.  Describe exactly what happens.

<P>
stream-text-output-record stream text-style

<P>
Returns a text output record for the <I> output recording stream</I> <I> stream</I>
suitable for holding characters in the text style <I> text-style</I>.  If there is
a currently ``open'' text output record that can hold characters in the
specified text style, it is simply returned.  Otherwise a new text output record
is created that can hold characters in that text style, and its starting cursor
position set to the cursor position of <I> stream</I>.

<P>
stream-close-text-output-record stream

<P>
Closes the <I> output recording stream</I> <I> stream</I>'s currently ``open'' text
output record by recording the stream's current cursor position as the ending
cursor position of the record and adding the text output record to
<I> stream</I>'s current output record by calling stream-add-output-record.

<P>
If there is no ``open'' text output record, stream-close-text-output-record
does nothing.

<P>
Calling stream-finish-output or stream-force-output, calling
redisplay, setting the text cursor position (via
stream-set-cursor-position*, terpri, or fresh-line), creating a
new output record (for example, via with-new-output-record), or changing
the state of stream-recording-p must close the current text output record.
Some CLIM implementations may also choose to close the current text output
record when the stream's drawing options or text style are changed, depending on
the exact implementation of text output records.

<P>
stream-add-character-output stream character text-style
                                           width height baseline

<P>
Adds the character <I> character</I> to the <I> output recording stream</I>
<I> stream</I>'s text output record in the <I> text style</I> <I> text-style</I>.
<I> width</I> and <I> height</I> are the width and height of the character in device
units.  <I> baseline</I> is the new baseline for the stream.
stream-add-character-output must be implemented by calling
add-character-output-to-text-record.

<P>
stream-write-char on an output recording stream will call
stream-add-character-output when stream-recording-p is <I> true</I>.

<P>
stream-add-string-output stream string start end text-style
                                        width height baseline

<P>
Adds the string <I> string</I> to the <I> output recording stream</I>
<I> stream</I>'s text output record in the <I> text style</I> <I> text-style</I>.
<I> start</I> and <I> end</I> are integers that specify the substring within
<I> string</I> to add to the text output record.  <I> width</I> and <I> height</I> are
the width and height of the string in device units.  <I> baseline</I> is the new
baseline for the stream.  stream-add-string-output must be implemented by
calling add-string-output-to-text-record.

<P>
stream-write-string on an output recording stream will call
stream-add-string-output when stream-recording-p is <I> true</I>.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html3090"
 HREF="node172.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html3086"
 HREF="node168.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html3080"
 HREF="node170.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html3088"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3091"
 HREF="node172.html">Output Recording Utilities</A>
<B> Up:</B> <A NAME="tex2html3087"
 HREF="node168.html">Output Recording Streams</A>
<B> Previous:</B> <A NAME="tex2html3081"
 HREF="node170.html">Graphics Output Recording</A>
 &nbsp <B>  <A NAME="tex2html3089"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
