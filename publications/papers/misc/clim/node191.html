<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Standard Programmer Interface</TITLE>
<META NAME="description" CONTENT="Standard Programmer Interface">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node192.html">
<LINK REL="previous" HREF="node190.html">
<LINK REL="up" HREF="node189.html">
<LINK REL="next" HREF="node192.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html3339"
 HREF="node192.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html3335"
 HREF="node189.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html3329"
 HREF="node190.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html3337"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3340"
 HREF="node192.html">Incremental Redisplay Protocol</A>
<B> Up:</B> <A NAME="tex2html3336"
 HREF="node189.html">Incremental Redisplay</A>
<B> Previous:</B> <A NAME="tex2html3330"
 HREF="node190.html">Examples of Incremental Redisplay</A>
 &nbsp <B>  <A NAME="tex2html3338"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION06720000000000000000">
Standard Programmer Interface</A>
</H1>

<P>
updating-output (stream
                              <TT> &amp;rest </TT>args
                              <TT> &amp;key </TT>unique-id (id-test #'eql)
                                   cache-value (cache-test #'eql)
                                   copy-cache-value fixed-position all-new
                                   output-record record-type)
                             <TT> &amp;body </TT>body

<P>
Introduces a caching point for incremental redisplay.  If this is used outside
the dynamic scope of an incremental redisplay, it has no particular effect.
However, when incremental redisplay is occurring, the supplied <I> cache-value</I>
is compared with the value stored in the cache identified by <I> unique-id</I>.
If the values differ or the code in <I> body</I> has not been run before, the code
in <I> body</I> runs, and <I> cache-value</I> is saved for next time.  If the cache
values are the same, the code in <I> body</I> is not run, because the current
output is still valid.

<P>
The <I> stream</I> argument is not evaluated, and must be a symbol that is bound to
an output recording stream.  If <I> stream</I> is t, *standard-output* is
used.  <I> body</I> may have zero or more declarations as its first forms.

<P>
 
<I> unique-id</I> provides a means to uniquely identify the output done by
<I> body</I>.  If <I> unique-id</I> is not supplied, CLIM will generate one that is
guaranteed to be unique.  <I> unique-id</I> may be any object as long as it is
unique with respect to the <I> id-test</I> predicate among all such unique ids in
the current incremental redisplay.  <I> id-test</I> is a function of two arguments
that is used for comparing unique ids; it has indefinite extent.

<P>
 
<I> cache-value</I> is a value that remains constant if and only if the output
produced by body does not need to be recomputed.  If the cache value is not
supplied, CLIM will not use a cache for this piece of output.  <I> cache-test</I>
is a function of two arguments that is used for comparing cache values; it has
indefinite extent.  If <I> copy-cache-value</I> is <I> true</I>, then the supplied
cache value will be copied using copy-seq before it is stored in the output
record.  The default for <I> copy-cache-value</I> is <I> false</I>.

<P>
If <I> fixed-position</I> is <I> true</I>, then the location of this output is
fixed relative to its parent output record.  When CLIM redisplays an output
record that has a fixed position, then if the contents have not changed, the
position of the output record will not change.  If the contents have changed,
CLIM assumes that the code will take care to preserve its position.  The default
for <I> fixed-position</I> is <I> false</I>.

<P>
If <I> all-new</I> is <I> true</I>, that indicates that all of the output done by
<I> body</I> is new, and will never match output previously recorded.  The default
for <I> all-new</I> is <I> false</I>.

<P>
 
<I> record-type</I> specifies the class of output record to create.  The default
is standard-updating-output-record.  This argument should only be supplied
by a programmer if there is a new class of output record that supports the
updating output record protocol.

<P>
redisplay record stream

<P>
This function simply calls redisplay-output-record on the arguments
<I> record</I> and <I> stream</I>.

<P>
redisplay-output-record record stream <TT> &amp;optional </TT>x y parent-x parent-y

<P>
SWM The coordinate system stuff affected by the x/y and parent-x/y
arguments is entirely bogus.  My proposal to make ``stream relative''
coordinates for output records instead of ``parent relative'' coordinates will
eliminate this completely.

<P>
 
(redisplay-output-record <I> record</I> <I> stream</I>) causes the output of
<I> record</I> to be recomputed.  CLIM redisplays the changes ``incrementally'',
that is, it only displays those parts that have been changed. <I> record</I> must
already be part of the output history of the <I> output recording stream</I>
<I> stream</I>, although it can be anywhere inside the hierarchy.

<P>
The optional arguments can be used to specify where on the <I> stream</I> the
output record should be redisplayed.  <I> x</I> and <I> y</I> represent where the
cursor should be, relative to (output-record-parent record), before we
start redisplaying <I> record</I>.  <I> parent-x</I> and <I> parent-y</I> can be
supplied to say: do the output as if the parent started at positions
<I> parent-x</I> and <I> parent-y</I> (which are in absolute coordinates).  The
default values for <I> x</I> and <I> y</I> are (output-record-start-position
<I> record</I>).  The default values for <I> parent-x</I> and <I> parent-y</I>
are

<P>
 
<PRE>

(convert-from-relative-to-absolute-coordinates 
  stream (output-record-parent record))
</PRE>

<P>
 
<I> record</I> will usually be an output record created by updating-output.
If it is not, then redisplay-output-record will be equivalent to
replay-output-record.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html3339"
 HREF="node192.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html3335"
 HREF="node189.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html3329"
 HREF="node190.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html3337"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3340"
 HREF="node192.html">Incremental Redisplay Protocol</A>
<B> Up:</B> <A NAME="tex2html3336"
 HREF="node189.html">Incremental Redisplay</A>
<B> Previous:</B> <A NAME="tex2html3330"
 HREF="node190.html">Examples of Incremental Redisplay</A>
 &nbsp <B>  <A NAME="tex2html3338"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
