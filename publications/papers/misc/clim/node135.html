<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>The Compositing Protocol</TITLE>
<META NAME="description" CONTENT="The Compositing Protocol">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node136.html">
<LINK REL="previous" HREF="node134.html">
<LINK REL="up" HREF="node134.html">
<LINK REL="next" HREF="node136.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html2583"
 HREF="node136.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html2579"
 HREF="node134.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html2573"
 HREF="node134.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html2581"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2584"
 HREF="node136.html">Patterns and Stencils</A>
<B> Up:</B> <A NAME="tex2html2580"
 HREF="node134.html">Patterned Designs</A>
<B> Previous:</B> <A NAME="tex2html2574"
 HREF="node134.html">Patterned Designs</A>
 &nbsp <B>  <A NAME="tex2html2582"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION05510000000000000000">
The Compositing Protocol</A>
</H1>

<P>
 
<I> Compositing</I><A NAME="15489"></A> creates a design whose appearance at each point is a
composite of the appearances of two other designs at that point.  Three
varieties of compositing are provided: <I> composing over</I><A NAME="15491"></A>,
<I> composing in</I><A NAME="15493"></A>, and <I> composing out</I><A NAME="15495"></A>.

<P>
The methods for compose-over, compose-in, and compose-out
will typically specialize both of the design arguments.

<P>
 
<I> In Release 2, compositing might only be supported for uniform designs.</I>

<P>
compose-over design1 design2

<P>
Composes a new design that is equivalent to the <I> design</I> <I> design1</I> on
top of the <I> design</I> <I> design2</I>.  Drawing the resulting design produces
the same visual appearance as drawing <I> design2</I> and then drawing
<I> design1</I>, but might be faster and might not allow the intermediate state to
be visible on the screen.

<P>
If both arguments are regions, compose-over is the same as
region-union.

<P>
This function is permitted to capture its mutable inputs; the
consequences of modifying those objects are unspecified. The result returned by compose-over might be freshly constructed or might
be an existing object.

<P>
compose-in ink mask

<P>
Composes a new design by clipping the <I> design</I> <I> ink</I> to the inside of
the <I> design</I> <I> mask</I>.  The first design, <I> ink</I>, supplies the color,
while the second design, <I> mask</I>, changes the shape of the design by
adjusting the opacity.

<P>
More precisely, at each point in the drawing plane the resulting design
specifies a color and an opacity as follows: the color is the same color that
<I> ink</I> specifies.  The opacity is the opacity that <I> ink</I> specifies,
multiplied by the stencil opacity of <I> mask</I>.

<P>
The <I> stencil opacity</I><A NAME="15512"></A> of a design at a point is defined as the opacity
that would result from drawing the design onto a fictitious medium whose drawing
plane is initially completely transparent black (opacity and all color
components are zero), and whose foreground and background are both opaque black.
With this definition, the stencil opacity of a member of class opacity is
simply its value.

<P>
If <I> mask</I> is a solid design, the effect of compose-in is to clip
<I> ink</I> to <I> mask</I>.  If <I> mask</I> is translucent, the effect is a soft
matte.

<P>
If both arguments are regions, compose-in is the same as
region-intersection.

<P>
This function is permitted to capture its mutable inputs; the
consequences of modifying those objects are unspecified. The result returned by compose-in might be freshly constructed or might be
an existing object.

<P>
compose-out ink mask

<P>
Composes a new design by clipping the <I> design</I> <I> ink</I> to the outside of
the <I> design</I> <I> mask</I>.  The first design, <I> ink</I>, supplies the color,
while the second design, <I> mask</I>, changes the shape of the design by
adjusting the opacity.

<P>
More precisely, at each point in the drawing plane the resulting design
specifies a color and an opacity as follows: the color is the same color that
<I> ink</I> specifies.  The opacity is the opacity that <I> ink</I> specifies,
multiplied by 1 minus the stencil opacity of <I> mask</I>.

<P>
If <I> mask</I> is a solid design, the effect of compose-out is to clip
<I> ink</I> to the complement of <I> mask</I>.  If <I> mask</I> is translucent, the
effect is a soft matte.

<P>
If both arguments are regions, compose-out is the same as
region-difference of <I> mask</I> and <I> ink</I>.

<P>
This function is permitted to capture its mutable inputs; the
consequences of modifying those objects are unspecified. The result returned by compose-out might be freshly constructed or might be
an existing object.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2583"
 HREF="node136.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html2579"
 HREF="node134.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html2573"
 HREF="node134.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html2581"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html2584"
 HREF="node136.html">Patterns and Stencils</A>
<B> Up:</B> <A NAME="tex2html2580"
 HREF="node134.html">Patterned Designs</A>
<B> Previous:</B> <A NAME="tex2html2574"
 HREF="node134.html">Patterned Designs</A>
 &nbsp <B>  <A NAME="tex2html2582"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
