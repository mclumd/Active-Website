<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Ports</TITLE>
<META NAME="description" CONTENT="Ports">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node76.html">
<LINK REL="previous" HREF="node74.html">
<LINK REL="up" HREF="node73.html">
<LINK REL="next" HREF="node76.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html1784"
 HREF="node76.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html1780"
 HREF="node73.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html1774"
 HREF="node74.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html1782"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html1785"
 HREF="node76.html">Grafts</A>
<B> Up:</B> <A NAME="tex2html1781"
 HREF="node73.html">Ports, Grafts, and Mirrored</A>
<B> Previous:</B> <A NAME="tex2html1775"
 HREF="node74.html">Introduction</A>
 &nbsp <B>  <A NAME="tex2html1783"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION04420000000000000000">
Ports</A>
</H1>

<P>
A <I> port</I><A NAME="8635"></A> is a logical connection to a display server.  It is responsible
for managing display output and server resources, and for handling incoming
input events.  Typically, the programmer will create a single port that will
manage all of the windows on the display.

<P>
A port is described with a <I> server path</I><A NAME="8637"></A>.  A server path is a list whose
first element is a keyword that selects the kind of port.  The remainder of the
server path is a list of alternating keywords and values whose interpretation is
port type-specific.

<P>
find-port <TT> &amp;key </TT>(server-path *default-server-path*)

<P>
Finds a port that provides a connection to the window server addressed by
<I> server-path</I>.  If no such connection exists, a new connection will be
constructed and returned.

<P>
The following server paths are currently supported:

<P>
 
:x11 <TT> &amp;key </TT>host display-id screen-id

<P>
Given this server path, find-port finds a port for the X server on the
given <I> host</I>, using the <I> display-id</I> and <I> screen-id</I>.

<P>
On a Unix host, if these values are not supplied, the defaults come from the
display environment variable.  Each CLIM implementation must describe how
it uses such environment variables.

<P>
 
:genera <TT> &amp;key </TT>screen

<P>
RSL This is old and obsolete.  Ditto :coral, or whatever we're
going to call it now.

<P>
 
*default-server-path*

<P>
This special variable is used by find-port and its callers to default the
choice of a display service to locate.  Binding this variable in a dynamic
context will affect the defaulting of this argument to these functions.  This
variable will be defaulted according to the environment.  In the Unix
environment, for example, CLIM will attempt to set this variable based on the
value of the display environment variable.

<P>
sheet-port sheet

<P>
Returns the port associated with the <I> sheet</I> <I> sheet</I>.  sheet-port
is defined for all kinds of sheets (including grafts and streams that support
the CLIM graphics protocol) and mediums.  For degrafted sheets or other objects
that aren't currently associated with particular ports, sheet-port will
return nil.

<P>
with-port-locked port <TT> &amp;body </TT>body

<P>
Executes <I> body</I> after grabbing a lock associated with the <I> port</I>
<I> port</I>, which may be a port or any object on which the function
sheet-port works.  If <I> object</I> currently has no port, <I> body</I> will
be executed without locking.

<P>
 
<I> body</I> may have zero or more declarations as its first forms.

<P>
port-properties port indicator
(setf port-properties) property port indicator

<P>
These functions provide a port-based property list.  They are primarily intended
to support users of CLIM that may need to associate certain information with
ports.  For example, the implementor of a special graphics package may need to
maintain resource tables for each port on which it is used.

<P>
map-over-ports function

<P>
Invokes <I> function</I> on each existing port.  Function is a function of one
argument, the port; it has dynamic extent.

<P>
restart-port port

<P>
In a multi-process Lisp, restart-port restarts the global input processing
loop associated with the <I> port</I> <I> port</I>.  All pending input events are
discarded.  Server resources may or may not be released and reallocated during
or after this action.

<P>
destroy-port port

<P>
Destroys the connection with the window server represented by the <I> port</I>
<I> port</I>.  All sheet hierarchies that are associated with <I> port</I> are
forcibly degrafted by disowning the children of grafts on <I> port</I> using
<I> sheet-disown-child</I>.  All server resources utilized by such hierarchies or
by any graphics objects on <I> port</I> are released as part of the connection
shutdown.

<P>
add-watcher port watcher
delete-watcher port watcher
reset-watcher watcher how

<P>
Watchers are a mechanism for clients to be notified when the port is destroyed
or restarted.  add-watcher and delete-watcher provide an interface for
adding and removing <I> watcher</I> to the list of watchers that the <I> port</I>
<I> port</I> maintains.  destroy-port and restart-port invoke
reset-watcher on each of these watchers with :destroy and
:restart being passed in as <I> how</I>, respectively.

<P>
SWM What exactly is a watcher?  The above is not specific enough.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html1784"
 HREF="node76.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html1780"
 HREF="node73.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html1774"
 HREF="node74.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html1782"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html1785"
 HREF="node76.html">Grafts</A>
<B> Up:</B> <A NAME="tex2html1781"
 HREF="node73.html">Ports, Grafts, and Mirrored</A>
<B> Previous:</B> <A NAME="tex2html1775"
 HREF="node74.html">Introduction</A>
 &nbsp <B>  <A NAME="tex2html1783"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
