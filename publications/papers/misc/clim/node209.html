<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Defining Presentation Types</TITLE>
<META NAME="description" CONTENT="Defining Presentation Types">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node210.html">
<LINK REL="previous" HREF="node208.html">
<LINK REL="up" HREF="node208.html">
<LINK REL="next" HREF="node210.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html3630"
 HREF="node210.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html3626"
 HREF="node208.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html3620"
 HREF="node208.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html3628"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3631"
 HREF="node210.html">Presentation Type Abbreviations</A>
<B> Up:</B> <A NAME="tex2html3627"
 HREF="node208.html">Presentation Types</A>
<B> Previous:</B> <A NAME="tex2html3621"
 HREF="node208.html">Presentation Types</A>
 &nbsp <B>  <A NAME="tex2html3629"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION07221000000000000000">
Defining Presentation Types</A>
</H2>

<P>
define-presentation-type name parameters
                                      <TT> &amp;key </TT>options inherit-from description history
                                           parameters-are-types 

<P>
Defines a presentation type whose name is the symbol or class <I> name</I> and
whose parameters are specified by the lambda-list <I> parameters</I>.  These
parameters are visible within <I> inherit-from</I> and within the methods created
with define-presentation-method.  For example, the parameters are used by
presentation-typep and presentation-subtypep methods to refine their
tests for type inclusion.

<P>
 
<I> options</I> is a list of option specifiers.  It defaults to nil.  An
option specifier is either a symbol or a list (<I> symbol</I> <TT> &amp;optional </TT>
<I> default</I> <I> supplied-p</I> <I> presentation-type</I> <I> accept-options</I>),
where <I> symbol</I>, <I> default</I>, and <I> supplied-p</I> are as in a normal
lambda-list.  If <I> presentation-type</I> and <I> accept-options</I> are present,
they specify how to accept a new value for this option from the user.
<I> symbol</I> can also be specified in the (<I> keyword</I> <I> variable</I>) form
allowed for Common Lisp lambda lists.  <I> symbol</I> is a variable that is
visible within <I> inherit-from</I> and within most of the methods created with
define-presentation-method.  The keyword corresponding to <I> symbol</I> can
be used as an option in the third form of a presentation type specifier.  An
option specifier for the standard option :description is automatically
added to <I> options</I> if an option with that keyword is not present, however it
does not produce a visible variable binding.

<P>
Unsupplied optional or keyword parameters default to * (as in deftype)
if no default is specified in <I> parameters</I>.  Unsupplied options default to
nil if no default is specified in <I> options</I>.

<P>
 
<I> inherit-from</I> is a form that evaluates to a presentation type specifier for
another type from which the new type inherits.  <I> inherit-from</I> can access
the parameter variables bound by the <I> parameters</I> lambda list and the option
variables specified by <I> options</I>.  If <I> name</I> is or names a CLOS class
(other than a built-in-class), then <I> inherit-from</I> must specify the
class's direct superclasses (using and to specify multiple inheritance).
It is useful to do this when you want to parameterize previously defined CLOS
classes.

<P>
If <I> inherit-from</I> is unsupplied, it defaults as follows:  If <I> name</I> is
or names a CLOS class, then the type inherits from the presentation type
corresponding to the direct superclasses of that CLOS class (using and to
specify multiple inheritance).  Otherwise, the type named by <I> name</I> inherits
from standard-object.

<P>
 
<I> description</I> is a string or nil.  This should be the term for an
instance for the type being defined.  If it is nil or unsupplied, a
description is automatically generated; it will be a ``prettied up'' version of
the type name, for example, small-integer would become "small
integer".  You can also write a describe-presentation-type presentation
method.  <I> description</I> is implemented by the default
describe-presentation-type method, so <I> description</I> only works in
presentation types where that default method is not shadowed.

<P>
 
<I> history</I> can be t (the default), which means this type has its own
history of previous inputs, nil, which means this type keeps no history,
or the name of another presentation type, whose history is shared by this
type.  More complex histories can be specified by writing a
presentation-type-history presentation method.

<P>
SWM What is a presentation type history?  Should they be exposed?

<P>
If the boolean <I> parameters-are-types</I> is <I> true</I>, this means that the
parameters to the presentation type are themselves presentation types.  If they
are not presentation types, <I> parameters-are-types</I> should be supplied as
<I> false</I>.  Types such as and, or, and sequence will specify
this as <I> true</I>.

<P>
Every presentation type must define or inherit presentation methods for
accept and present if the type is going to be used for input and
output.  For presentation types that are only going to be used for input via the
pointer, the accept need not be defined.

<P>
If a presentation type has <I> parameters</I>, it must define presentation methods
for presentation-typep and presentation-subtypep that handle the
parameters, or inherit appropriate presentation methods.  In many cases it
should also define presentation methods for describe-presentation-type and
presentation-type-specifier-p.

<P>
There are certain restrictions on the <I> inherit-from</I> form, to allow it to be
analyzed at compile time.  The form must be a simple substitution of parameters
and options into positions in a fixed framework.  It cannot involve conditionals
or computations that depend on valid values for the parameters or options; for
example, it cannot require parameter values to be numbers.  It cannot depend on
the dynamic or lexical environment.  The form will be evaluated at compile time
with uninterned symbols used as dummy values for the parameters and options.  In
the type specifier produced by evaluating the form, the type name must be a
constant that names a type, the type parameters cannot derive from options of
the type being defined, and the type options cannot derive from parameters of
the type being defined.  All presentation types mentioned must be already
defined.  and can be used for multiple inheritance, but or, not,
and satisfies cannot be used.

<P>
None of the arguments, except <I> inherit-from</I>, is evaluated.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html3630"
 HREF="node210.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html3626"
 HREF="node208.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html3620"
 HREF="node208.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html3628"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3631"
 HREF="node210.html">Presentation Type Abbreviations</A>
<B> Up:</B> <A NAME="tex2html3627"
 HREF="node208.html">Presentation Types</A>
<B> Previous:</B> <A NAME="tex2html3621"
 HREF="node208.html">Presentation Types</A>
 &nbsp <B>  <A NAME="tex2html3629"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
