<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.1 release (March 30, 1999)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Commands</TITLE>
<META NAME="description" CONTENT="Commands">
<META NAME="keywords" CONTENT="clim">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.1 release">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="clim.css">

<LINK REL="next" HREF="node244.html">
<LINK REL="previous" HREF="node242.html">
<LINK REL="up" HREF="node242.html">
<LINK REL="next" HREF="node244.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html4099"
 HREF="node244.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html4095"
 HREF="node242.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html4089"
 HREF="node242.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html4097"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html4100"
 HREF="node244.html">Command Tables</A>
<B> Up:</B> <A NAME="tex2html4096"
 HREF="node242.html">Command Processing</A>
<B> Previous:</B> <A NAME="tex2html4090"
 HREF="node242.html">Command Processing</A>
 &nbsp <B>  <A NAME="tex2html4098"
 HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION08110000000000000000">
Commands</A>
</H1>

<P>
A <I> command</I><A NAME="32303"></A> is an object that represents a user interaction.  Commands
are stored as a cons of the command name and a list of the command's arguments.
All positional arguments will be represented in the command object, but only
those keywords arguments that were explicitly supplied by the user will be
included.  When the first element of the cons is apply'ed to the rest of
the cons, the code representing that interaction is executed.

<P>
A <I> partial command</I><A NAME="32305"></A> is a command object with the value of
*unsupplied-argument-marker* in place of any argument that needs to be
filled in.

<P>
Every command is named by <I> command name</I><A NAME="32307"></A>, which is a symbol.  To avoid
collisions among command names, application frames should reside in their own
package; for example, the com-show-chart command might be defined for both
a spreadsheet and a medical application.

<P>
command-name command

<P>
Given a command object <I> command</I>, returns the command name.

<P>
command-arguments command

<P>
Given a command object <I> command</I>, returns the command's arguments.

<P>
partial-command-p command

<P>
Returns <I> true</I> if the <I> command</I> is a partial command, that is, has any
occurrences of *unsupplied-argument-marker* in it.  Otherwise,
partial-command-p returns <I> false</I>.

<P>
define-command name-and-options arguments <TT> &amp;body </TT>body

<P>
This is the most basic command-defining form.  Usually, the programmer will not
use define-command directly, but will instead use a define-<I> frame</I>-command 
form that is automatically generated by define-application-frame.
define-<I> frame</I>-command  adds the command to the application frame's command table.
By default, define-command does not add the command to any command table.

<P>
 
<I> name-and-options</I> is either a command name, or a cons of the command name
and a list of keyword-value pairs.

<P>
define-command defines two functions.  The first function has the same name
as the command name, and implements the body of the command.  It takes as
arguments the arguments to the command as specified by the define-command
form, as required and keyword arguments.

<P>
The name of the other function defined by define-command is unspecified.
It implements the code used by the command processor for parsing and returning
the command's arguments.

<P>
The keywords from <I> name-and-options</I> can be:

<P>

<UL>
<LI>:command-table <I> command-table-name</I>, where
<I> command-table-name</I> either names a command table to which the command will
be added, or is nil (the default) to indicate that the command should not
be added to any command table.  If the command table does not exist, the
command-table-not-found error will be signalled.  This keyword is only
accepted by define-command, not by define-<I> frame</I>-command.

<P>
 </LI>
<LI>:name <I> string</I>, where <I> string</I> is a string that will be used
as the command-line name for the command for keyboard interactions in the
command table specified by the :command-table option.  The default is
nil, meaning that the command will not be available via command-line
interactions.  If <I> string</I> is t, then the command-line name will be
generated automatically, as described in add-command-to-command-table.

<P>
 </LI>
<LI>:menu <I> menu-item</I>, where <I> menu-item</I> will be an item in the
menu of the command table specified by the :command-table option.  The
default is nil, meaning that the command will not be available via menu
interactions.  If <I> menu-item</I> is a string, then that string will be used as
the menu name.  If <I> menu-item</I> is t, then the menu name will be
generated automatically, as described in add-command-to-command-table.
Otherwise, <I> menu-item</I> must be a cons of the form (<I> string</I> .
<I> menu-options</I>), where <I> string</I> is the menu name and <I> menu-options</I>
consists of keyword-value pairs.  The valid keywords are :after,
:documentation, and :text-style, which are interpreted as for
add-menu-item-to-command-table.

<P>
 </LI>
<LI>:keystroke <I> gesture</I>, where <I> gesture</I> is a keyboard gesture
name that specifies a keystroke accelerator to use for this command in the
command table specified by the :command-table option.  The default is
nil, meaning that there is no keystroke accelerator.</LI>
</UL>

<P>
The :name, :menu-item, and :keystroke options are only allowed if
the :command-table option was supplied explicitly or implicitly, as in
define-<I> frame</I>-command.

<P>
 
<I> arguments</I> is a list consisting of argument descriptions.  A single occurrence of
the symbol <TT> &amp;key </TT> may appear in <I> arguments</I> to separate required command arguments
from keyword arguments.  Each argument description consists of a parameter
variable, followed by a presentation type specifier, followed by keyword-value
pairs.  The keywords can be:

<P>

<UL>
<LI>:default <I> value</I>, where <I> value</I> is the default that should
be used for the argument, as for accept.

<P>
 </LI>
<LI>:default-type is the same as for accept.

<P>
 </LI>
<LI>:display-default is the same as for accept.

<P>
 </LI>
<LI>:mentioned-default <I> value</I>, where <I> value</I> is the default
that should be used for the argument when a keyword is explicitly supplied via
the command-line processor, but no value is supplied for it.
:mentioned-default is only allowed on keyword arguments.

<P>
 </LI>
<LI>:prompt <I> string</I>, where <I> string</I> is a prompt to print out
during command-line parsing, as for accept.

<P>
 </LI>
<LI>:documentation <I> string</I>, where <I> string</I> is a documentation
string that describes what the argument is.

<P>
 </LI>
<LI>:when <I> form</I>.  <I> form</I> is evaluated in a scope where the
parameter variables for the required parameters are bound, and if the result is
nil, the keyword argument is not available.  :when is only allowed on
keyword arguments, and <I> form</I> cannot use the values of other keyword
arguments.

<P>
 </LI>
<LI>:gesture <I> gesture</I>, where <I> gesture</I> is either a pointer
gesture name or a list of a pointer gesture name followed by keyword-value
pairs.  When a gesture is supplied, a presentation translator will be defined
that translator that translates from the argument to a command.  The
keyword-value pairs are used as options for the translator.  Valid keywords are
:tester, :menu, :priority, :echo, :documentation, and
:pointer-documentation.  The default for <I> gesture</I> is nil, meaning
no translator will be written.  :gesture is only allowed when the
:command-table option was supplied to the command-defining form.</LI>
</UL>

<P>
 
<I> body</I> implements the body of the command.  It has lexical access to all of
the commands arguments.  If the body of the command needs access to the
application frame itself, it should use *application-frame*.  The returned
values of body are ignored.  <I> body</I> may have zero or more declarations as
its first forms. 

<P>
define-command must arrange for the function that implements the body of
the command to get the proper values for unsupplied keyword arguments.

<P>
 
<I> name-and-options</I> and <I> body</I> are not evaluated.  In the argument
descriptions, the parameter variable name is not evaluated, and everything else
is evaluated at run-time when argument parsing reaches that argument, except
that the value for :when is evaluated when parsing reaches the keyword
arguments, and :gesture isn't evaluated at all.

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html4099"
 HREF="node244.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/icons/next_motif.gif"></A> 
<A NAME="tex2html4095"
 HREF="node242.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/icons/up_motif.gif"></A> 
<A NAME="tex2html4089"
 HREF="node242.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/icons/previous_motif.gif"></A> 
<A NAME="tex2html4097"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/icons/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html4100"
 HREF="node244.html">Command Tables</A>
<B> Up:</B> <A NAME="tex2html4096"
 HREF="node242.html">Command Processing</A>
<B> Previous:</B> <A NAME="tex2html4090"
 HREF="node242.html">Command Processing</A>
 &nbsp <B>  <A NAME="tex2html4098"
 HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>&</I>
<BR><I>2001-06-12</I>
</ADDRESS>
</BODY>
</HTML>
